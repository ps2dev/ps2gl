<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PS2GL: GS memory &#39;slots&#39;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">PS2GL
   </div>
   <div id="projectbrief">OpenGL*-like API for the PS2</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__gs__mem__slots.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">GS memory 'slots'<div class="ingroups"><a class="el" href="group__pgl__api.html">pgl* API</a> &raquo; <a class="el" href="group__gs__mem.html">gs memory management</a></div></div></div>
</div><!--header-->
<div class="contents">
<div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for GS memory 'slots':</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__gs__mem__slots.svg" width="348" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gab8c35b45aa5aaf7bc84c3d87696f13bc" id="r_gab8c35b45aa5aaf7bc84c3d87696f13bc"><td class="memItemLeft" align="right" valign="top">pgl_slot_handle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab8c35b45aa5aaf7bc84c3d87696f13bc">pglAddGsMemSlot</a> (int startingPage, int pageLength, unsigned int pixelMode)</td></tr>
<tr class="separator:gab8c35b45aa5aaf7bc84c3d87696f13bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacfb16d5676a001f49d9c4d860e6112f3" id="r_gacfb16d5676a001f49d9c4d860e6112f3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gacfb16d5676a001f49d9c4d860e6112f3">pglLockGsMemSlot</a> (pgl_slot_handle_t slot_handle)</td></tr>
<tr class="separator:gacfb16d5676a001f49d9c4d860e6112f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac13343490b8bdeca3311b17680a15380" id="r_gac13343490b8bdeca3311b17680a15380"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac13343490b8bdeca3311b17680a15380">pglUnlockGsMemSlot</a> (pgl_slot_handle_t slot_handle)</td></tr>
<tr class="separator:gac13343490b8bdeca3311b17680a15380"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga47310b5954ac9b60a0e70cd84b948787" id="r_ga47310b5954ac9b60a0e70cd84b948787"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga47310b5954ac9b60a0e70cd84b948787">pglRemoveAllGsMemSlots</a> ()</td></tr>
<tr class="separator:ga47310b5954ac9b60a0e70cd84b948787"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>API for managing the "slots" that partition GS memory in ps2gl. As mentioned in the documentation for "GS memory management," ps2gl asks the user to partition GS memory into slots. A slot is defined by a starting page number in GS ram, a page length, and a preferred pixel format.</p>
<p>Note that the pixel format of a slot is its <em>preferred</em> format. If there are no slots of the requested pixel type large enough, ps2gl will try to find a big enough slot of a "higher" pixel type. For example, a 64x64, 32-bit slot (2 pages) might be allocated to hold a 128x128, 8-bit image if there were no 8-bit slots large enough.</p>
<p>The idea is that if a level has a lot of 64x64, 8-bit textures, you would allocate a lot of 64x64, 8-bit slots.</p>
<p>For example, say that our app uses a 640x448 interlaced display with a 24-bit depth buffer. We would create 3 slots, one for the depth buffer and two for a double-buffered frame buffer.</p>
<p>First, we need the size and starting address of each slot. The size is calculated from the dimensions of a page for the pixel format in question. Here are the dimensions of one GS "page" for the various pixel formats (from section 8.3 of the GS manual):</p>
<ul>
<li>64x32: PSMCT32/24, PSMZ32/24</li>
<li>64x64: PSMCT16/16S</li>
<li>128x64: PSMT8</li>
<li>128x128: PSMT4</li>
</ul>
<p>Each frame buffer is 640x224 (interlaced) at 32-bits. This means we need a slot 10 pages by 7 pages = 70 pages. The 24-bit depth buffer pages are the same size, so we need another 70 pages for the depth buffer.</p>
<p>Now that we have the sizes of each slot (70 pages), we just need the starting addresses. It doesn't really matter much where they begin, except of course when existing code assumes to find them in certain places. So let's make them contiguous starting at page 0: </p>
<p>pglAddGsMemSlot( 0, 70, SCE_GS_PSMCT32 );<br  />
 pglAddGsMemSlot( 70, 70, SCE_GS_PSMCT32 );<br  />
 pglAddGsMemSlot( 140, 70, SCE_GS_PSMZ32 );<br  />
 </p>
<p>Take a look at <a class="el" href="ps2glut_8cpp_source.html">ps2glut.cpp</a> for a more complete example (a better tutorial is on the way). </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gab8c35b45aa5aaf7bc84c3d87696f13bc" name="gab8c35b45aa5aaf7bc84c3d87696f13bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab8c35b45aa5aaf7bc84c3d87696f13bc">&#9670;&#160;</a></span>pglAddGsMemSlot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pgl_slot_handle_t pglAddGsMemSlot </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>startingPage</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>pageLength</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>pixelMode</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="gsmemory_8cpp.html">src/gsmemory.cpp</a>&gt;</code></p>
<p>Adds a memory slot to the list of free slots. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">startingPage</td><td>the first page this slot occupies </td></tr>
    <tr><td class="paramname">pageLength</td><td>the number of pages this slot occupies (NOT the last page) </td></tr>
    <tr><td class="paramname">pixelMode</td><td>the preferred pixel format of this slot </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a handle to the new slot </dd></dl>

<p class="definition">Definition at line <a class="el" href="gsmemory_8cpp_source.html#l00118">118</a> of file <a class="el" href="gsmemory_8cpp_source.html">gsmemory.cpp</a>.</p>

</div>
</div>
<a id="gacfb16d5676a001f49d9c4d860e6112f3" name="gacfb16d5676a001f49d9c4d860e6112f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacfb16d5676a001f49d9c4d860e6112f3">&#9670;&#160;</a></span>pglLockGsMemSlot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pglLockGsMemSlot </td>
          <td>(</td>
          <td class="paramtype">pgl_slot_handle_t</td>          <td class="paramname"><span class="paramname"><em>slot_handle</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="gsmemory_8cpp.html">src/gsmemory.cpp</a>&gt;</code></p>
<p>Prevents a slot from being allocated or freed automatically. The slot can still be bound to an area by the user. </p>

<p class="definition">Definition at line <a class="el" href="gsmemory_8cpp_source.html#l00132">132</a> of file <a class="el" href="gsmemory_8cpp_source.html">gsmemory.cpp</a>.</p>

</div>
</div>
<a id="gac13343490b8bdeca3311b17680a15380" name="gac13343490b8bdeca3311b17680a15380"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac13343490b8bdeca3311b17680a15380">&#9670;&#160;</a></span>pglUnlockGsMemSlot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pglUnlockGsMemSlot </td>
          <td>(</td>
          <td class="paramtype">pgl_slot_handle_t</td>          <td class="paramname"><span class="paramname"><em>slot_handle</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="gsmemory_8cpp.html">src/gsmemory.cpp</a>&gt;</code></p>
<p>Lets the memory manager automatically allocate/free a slot that was previously locked. </p>

<p class="definition">Definition at line <a class="el" href="gsmemory_8cpp_source.html#l00142">142</a> of file <a class="el" href="gsmemory_8cpp_source.html">gsmemory.cpp</a>.</p>

</div>
</div>
<a id="ga47310b5954ac9b60a0e70cd84b948787" name="ga47310b5954ac9b60a0e70cd84b948787"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga47310b5954ac9b60a0e70cd84b948787">&#9670;&#160;</a></span>pglRemoveAllGsMemSlots()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pglRemoveAllGsMemSlots </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="gsmemory_8cpp.html">src/gsmemory.cpp</a>&gt;</code></p>
<p>Removes all gs memory slots. </p>

<p class="definition">Definition at line <a class="el" href="gsmemory_8cpp_source.html#l00151">151</a> of file <a class="el" href="gsmemory_8cpp_source.html">gsmemory.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Mar 19 2025 19:24:03 for PS2GL by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
